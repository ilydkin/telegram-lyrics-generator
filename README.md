# Telegram lyrics generator (Voluspa)
A small project of making a Telegram chat service on the basis of a neural network 
that was trained on Manowar lyrics to produce 'predictions' in tune with the questions.

Original concept is borrowed from: https://github.com/dlebech/lyrics-generator/

Actions taken and features introduced in this project:
 - Preparation of feed for the model on the basis of Manowar songs, fetched from https://www.azlyrics.com/ (Feed_Preparation.ipynb)
 - Training the model on the resulting dataset
 - Embedding the lyrics-generator script into the Telegram 'echo bot'
 - Deployment of the service in YandexCloud

# Telegram bot
The bot is called `Voluspa` (see Poetic Edda for reference).
The choice of the bot's name was informed by the specifically elevated style of texts generated by the Manowar-imitating model.
Voluspa lives here: http://t.me/MN_o_WR_bot

# Feed preparation
The source webpage doesn't let fetch all the 137 texts and blocks requests after 99 successful answers.
All non-English texts are removed from the data set.
To cook your own feed and make it digestible for the model you may wish to follow the recipe:
  1. The code expects an input dataset to be stored as `data/songdata.csv` by default. Alternatively, you can name it anything you like and use the `--songdata-file` parameter when training.
  2. The file should be in CSV format with the following columns (case sensitive):
     - `artist`(A string, e.g. "The Beatles")
     - `text`(A string with the entire lyrics for one song, including newlines)

# Embeddings
- Download `glove.6B.50d.txt` file from:http://nlp.stanford.edu/data/glove.6B.zipin and put it in the subdirectory `data/`.
- Or create your own embedding: make `songdata.csv` file from above and then run:
```shell
python -m lyrics.embedding --name-suffix _myembedding
```
- This will create `word2vec_myembedding.model` and `word2vec_myembedding.txt` files in the default subdirectory `data/`.

# Training the model
To train your own model run one of the following:
```shell
python -m lyrics.train --early-stopping-patience 50 --artists '*'
python -m lyrics.train --embedding-file ./word2vec_myembedding.txt
```
Check `python -m lyrics.train -h` for other options
Check `lyrics/config.py` for training configuration 

# Run main()
To make it work you will have to specify your telegram token in tg_token

# Install dependencies
Requires Python 3.7+.
```shell
pip install -r requirements.txt
```